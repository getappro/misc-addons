<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_payslip">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <style>
                        table {
                        font-size: 12px;
                        }
                        td {
                        text-align: center;
                        }
                        th {
                        text-align: center;
                        }
                    </style>
                    <div class="page">
                        <table class="table table-sm">
                            <tr>
                                <td style="background-color: #C7DBC9; font-weight: bold; text-align: left; width:25%;">
                                    BULLETIN DE PAIE
                                </td>
                                <td colspan="3">Période de :
                                    <span t-field="o.date_from"/>
                                    au :
                                    <span t-field="o.date_to"/>
                                </td>
                                <td colspan="3">Paiement le : par :</td>
                            </tr>
                            <tr>
                                <td style="text-align:left;" rowspan="3">
                                    <span t-field="o.company_id.name"/>
                                    <br/>
                                    N° C.N.S.S :
                                    <br/>
                                    N° C.I.M.R :
                                    <br/>
                                    R.C :
                                    <br/>
                                    I.F :
                                </td>
                                <td>
                                    Matricule :
                                    <br/>

                                </td>
                                <td>
                                    Date de naissance :
                                    <br/>
                                    <span t-field="o.employee_id.birthday"/>
                                </td>
                                <td>
                                    N° de C.I.N :
                                    <br/>
                                    <span t-field="o.employee_id.identification_id"/>
                                </td>
                                <td colspan="2">
                                    N° de Sécurité Sociale :
                                    <br/>
                                    <span t-field="o.employee_id.mat_cnss"/>
                                </td>
                                <td>
                                    N° de C.I.M.R :
                                    <br/>
                                    <span t-field="o.employee_id.mat_cimr"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    Date d'ambauche:
                                    <br/>
                                    <span t-field="o.contract_id.date_start"/>
                                </td>
                                <td colspan="2">
                                    Ancienneté:
                                    <br/>
                                    <span t-field="o.contract_id.worked_age"/>
                                </td>
                                <td colspan="2">
                                    Poste Occupé:
                                    <br/>
                                    <span t-field="o.contract_id.job_id"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    Situation familiale:
                                    <br/>
                                    <span t-field="o.employee_id.marital"/>
                                </td>
                                <td colspan="2">
                                    Nombre de déduction:
                                    <br/>
                                    <span t-field="o.employee_id.dependents"/>
                                </td>
                                <td colspan="2">
                                    Département:
                                    <br/>
                                    <span t-field="o.contract_id.department_id"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="height:100px;" colspan="4"/>
                                <td colspan="3" rowspan="3"
                                    style="background-color: #C7DBC9; text-align: left; width: 50%; height: 150px; padding:35px 50px;">
                                    <span style="font-weight: bold; " t-field="o.employee_id.address_home_id"/>
                                    <br/>
                                    <span t-field="o.employee_id.address_home_id.street"/>
                                    <br/>
                                    <t t-if="o.employee_id.address_home_id.street2">
                                        <span t-field="o.employee_id.address_home_id.street2"/>
                                        <br/>
                                    </t>
                                    <span t-field="o.employee_id.address_home_id.zip"/>
                                    <span t-field="o.employee_id.address_home_id.city"/>
                                    <br/>
                                    <span t-field="o.employee_id.address_home_id.country_id"/>
                                </td>
                            </tr>
                            <tr>
                                <td/>
                                <td>Aquis</td>
                                <td>Reste à prendre</td>
                                <td>Pris</td>
                            </tr>
                            <tr>
                                <td>Congés mois</td>
                                <td>
                                    <span t-field="o.employee_id.allocation_display"/>
                                </td>
                                <td>
                                    <span t-field="o.employee_id.allocation_remaining_display"/>
                                </td>
                                <td>
                                </td>
                            </tr>
                        </table>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th rowspan="2">N°</th>
                                    <th rowspan="2">Désignation</th>
                                    <th rowspan="2">Nombre</th>
                                    <th rowspan="2">Base</th>
                                    <th colspan="3">Part Salariale</th>
                                    <th colspan="3">Part Patronale</th>
                                </tr>
                                <tr>
                                    <th>Taux</th>
                                    <th>Gains</th>
                                    <th>Retenus</th>
                                    <th>Taux</th>
                                    <th>Retenus(+)</th>
                                    <th>Retenus(-)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="get_payslip_lines(o.line_ids)" t-as="line">
                                    <td>
                                        <span t-esc="line.sequence or ''"/>
                                    </td>
                                    <td style="text-align: left;">
                                        <t t-if="line.code != 'GROSS' and line.code != 'TOTDED'">
                                            <span t-esc="line.name"/>
                                        </t>
                                        <t t-if="line.code == 'GROSS' or line.code == 'TOTDED'">
                                            <span style="text-align:center; font-weight:bold; padding-left: 50px;"
                                                  t-esc="line.name"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="line.code == 'JRTV'">
                                            <span t-esc="line.total or ''"
                                                  t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 0}"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="line.category_id.code == 'DED' ">
                                            <span t-esc="line.amount or ''"
                                                  t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="line.category_id.code == 'DED' ">
                                            <span t-esc="line.rate or ''"
                                                  t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="line.category_id.code == 'BASIC' or line.category_id.code == 'GROSS' ">
                                            <span t-esc="line.total or ''"
                                                  t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="line.category_id.code == 'DED' or line.category_id.code == 'IR' or line.code == 'TOTDED'">
                                            <span t-esc="line.total or ''"
                                                  t-options="{&quot;widget&quot;: &quot;float&quot;, &quot;precision&quot;: 2}"/>
                                        </t>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>